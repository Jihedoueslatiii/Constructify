<div class="container">
  <!-- Success Message Panel -->
  <div *ngIf="successMessage" class="success-panel">
    {{ successMessage }}
    <button (click)="clearSuccessMessage()" class="close-btn">Ã—</button>
  </div>

  <h2 class="title">Supplier Overview</h2>

  <!-- Search Bar -->
  <div class="search-bar">
    <input
      type="text"
      [(ngModel)]="searchQuery"
      (input)="filterSuppliers()"
      placeholder="Search suppliers..."
      class="search-input"
    />
    <button class="search-button">
      <i class="fas fa-search"></i>
    </button>
  </div>

  <!-- Card View of Suppliers -->
  <div class="card-container">
    <div class="card" *ngFor="let supplier of filteredSuppliers">
      <h3>{{ supplier.name }}</h3>
      <p><strong>Contact:</strong> {{ supplier.contactPerson }}</p>
      <p><strong>Email:</strong> {{ supplier.email }}</p>
      <p><strong>Phone Number:</strong> {{ supplier.phoneNumber }}</p>
      <p><strong>Address:</strong> {{ supplier.address }}</p>
      <p><strong>Status:</strong> <span class="status {{ supplier.status }}">{{ supplier.status }}</span></p>
      <div class="buttons">
        <button class="btn edit" [routerLink]="['/update-supplier', supplier.idSupplier]">
          <svg class="svgIcon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M15 3L17.5 5.5L8 15H5V12L15 3Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
        <button class="btn delete" (click)="supplier.idSupplier ? deleteSupplier(supplier.idSupplier) : null">
          <svg class="svgIcon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M6 19L18 5M6 5L18 19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
      </div>
    </div>
  </div>

  <!-- Kanban Board Section -->
  <div class="kanban-section">
    <div class="kanban-board" cdkDropListGroup>
      <div class="kanban-column" cdkDropList [cdkDropListData]="preferredSuppliers" (cdkDropListDropped)="drop($event, 'Preferred')">
        <h3>ğŸ”µ Preferred Suppliers</h3>
        <div
          class="kanban-item"
          *ngFor="let supplier of preferredSuppliers"
          cdkDrag
          (click)="openSupplierDetails(supplier)"
        >
          <h4>{{ supplier.name }}</h4>
          <p><strong>Status:</strong> {{ supplier.status }}</p>
        </div>
      </div>

      <div class="kanban-column" cdkDropList [cdkDropListData]="underReviewSuppliers" (cdkDropListDropped)="drop($event, 'Under Review')">
        <h3>ğŸŸ  Under Review</h3>
        <div
          class="kanban-item"
          *ngFor="let supplier of underReviewSuppliers"
          cdkDrag
          (click)="openSupplierDetails(supplier)"
        >
          <h4>{{ supplier.name }}</h4>
          <p><strong>Status:</strong> {{ supplier.status }}</p>
        </div>
      </div>

      <div class="kanban-column" cdkDropList [cdkDropListData]="blacklistedSuppliers" (cdkDropListDropped)="drop($event, 'Blacklisted')">
        <h3>ğŸ”´ Blacklisted</h3>
        <div
          class="kanban-item"
          *ngFor="let supplier of blacklistedSuppliers"
          cdkDrag
          (click)="openSupplierDetails(supplier)"
        >
          <h4>{{ supplier.name }}</h4>
          <p><strong>Status:</strong> {{ supplier.status }}</p>
        </div>
      </div>
    </div>
  </div>
</div>